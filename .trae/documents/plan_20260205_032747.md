I will create a full-stack application with a Node.js backend and a React frontend (Admin Panel).

### **Project Structure**
- `server/`: Node.js backend handling WhatsApp, SQLite, and AI logic.
- `client/`: React Admin Panel for control and configuration.

### **Step 1: Backend Implementation (Node.js + Express)**
1.  **Setup**: Initialize project with `express`, `whatsapp-web.js`, `openai`, `better-sqlite3`, `jsonwebtoken`, `bcrypt`, `node-cron`, and `socket.io`.
2.  **Database (SQLite)**:
    -   **Users**: For secure admin login.
    -   **Settings**: To store config (ON/OFF status, Schedule, Token Limits, Model Selection, System Prompt).
    -   **Categories**: To organize knowledge (e.g., Personal, Services).
    -   **Knowledge**: To store text chunks and embeddings.
    -   **ChatLogs**: To store message history.
3.  **Services**:
    -   **WhatsApp Service**: Initialize the bot, handle QR code generation (streamed to frontend), and listen for messages.
    -   **AI Service**:
        -   **RAG (Retrieval Augmented Generation)**: Convert user query to vector, search SQLite for relevant knowledge, and feed it to OpenAI.
        -   **Token Management**: Check usage against limits.
    -   **Scheduler**: Use `node-cron` to automatically enable/disable the bot based on user-defined hours.
4.  **API Routes**: Endpoints for Login, Knowledge management, Settings update, and Chat history retrieval.

### **Step 2: Frontend Implementation (React + Vite + Tailwind)**
1.  **Setup**: Initialize React project with Tailwind CSS.
2.  **Pages**:
    -   **Login**: Secure authentication page.
    -   **Dashboard**:
        -   Show Bot Status (Online/Offline/Schedule Mode).
        -   **QR Code Display**: Real-time rendering for pairing.
        -   Manual Override (Turn ON/OFF).
    -   **Knowledge Base**:
        -   Category Manager (Create/Edit/Delete).
        -   Content Editor (Add knowledge text to specific categories).
    -   **Settings**:
        -   **AI Behavior**: Editor for the "System Prompt".
        -   **Model Picker**: Dropdown for OpenAI models (GPT-4o, GPT-3.5, etc.).
        -   **Schedule**: Time picker for Auto-ON/OFF.
        -   **Limits**: Set max tokens per day/response.
    -   **History**: View past conversations.

### **Step 3: Integration & Verification**
1.  Connect Frontend to Backend API.
2.  Verify WhatsApp pairing via the Admin Panel.
3.  Test Knowledge Injection: Add facts and ask the bot via WhatsApp.
4.  Test Schedule and Token Limits.
